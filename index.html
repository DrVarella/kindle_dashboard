<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendário Kindle</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: #fff;
            color: #000;
            overflow-x: hidden;
        }

        /* Container principal */
        .container {
            display: flex;
            width: 100%;
            height: 100vh;
        }

        .container.retrato {
            flex-direction: column;
        }

        .container.paisagem {
            flex-direction: row;
        }

        /* Seção do Relógio */
        .secao-relogio {
            background: #f8f8f8;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-right: 2px solid #ddd;
        }

        .container.paisagem .secao-relogio {
            flex: 1;
            min-width: 400px;
            border-right: 2px solid #ddd;
            border-bottom: none;
        }

        .container.retrato .secao-relogio {
            border-right: none;
            border-bottom: 2px solid #ddd;
            padding: 30px 20px;
        }

        .relogio {
            font-family: 'Courier New', monospace;
            font-size: 120px;
            font-weight: bold;
            line-height: 1;
            margin-bottom: 20px;
        }

        .data-completa {
            font-size: 24px;
            margin-bottom: 10px;
            text-align: center;
        }

        .dia-semana {
            font-size: 20px;
            color: #555;
            text-align: center;
        }

        /* Seção de Eventos */
        .secao-eventos {
            flex: 2;
            padding: 30px;
            overflow-y: auto;
            background: #fff;
        }

        .titulo-eventos {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #000;
        }

        .lista-eventos {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .evento {
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #ccc;
            transition: all 0.3s ease;
        }

        /* Estados dos eventos */
        .evento.passado {
            opacity: 0.4;
            background: #e8e8e8;
        }

        .evento.atual {
            background: #fff9e6;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(255, 220, 0, 0.3);
            border-left-color: #ffd700;
        }

        .evento.futuro {
            background: #f5f5f5;
            border-left-color: #999;
        }

        .evento-titulo {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .evento-horario {
            font-size: 16px;
            color: #555;
        }

        .sem-eventos {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 18px;
        }

        /* Painel de Controles */
        .controles-btn {
            position: fixed;
            top: 15px;
            left: 15px;
            background: #000;
            color: #fff;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .controles-btn:active {
            transform: scale(0.95);
        }

        .painel-controles {
            position: fixed;
            top: 80px;
            left: 15px;
            background: rgba(255, 255, 255, 0.98);
            border: 2px solid #000;
            border-radius: 10px;
            padding: 20px;
            width: 320px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 999;
            display: none;
        }

        .painel-controles.aberto {
            display: block;
        }

        .controle-grupo {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }

        .controle-grupo:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .controle-label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: #ddd;
            outline: none;
            border-radius: 4px;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #000;
            cursor: pointer;
            border-radius: 50%;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #000;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }

        .slider-valor {
            font-weight: bold;
            min-width: 50px;
            text-align: right;
        }

        .botoes-rapidos {
            display: flex;
            gap: 8px;
        }

        .btn-rapido {
            flex: 1;
            padding: 10px;
            background: #fff;
            border: 2px solid #000;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 13px;
        }

        .btn-rapido.ativo {
            background: #000;
            color: #fff;
        }

        .btn-rapido:active {
            transform: scale(0.95);
        }

        .input-data {
            width: 100%;
            padding: 10px;
            border: 2px solid #000;
            border-radius: 5px;
            font-size: 14px;
        }

        /* Seletor de modo */
        .modo-layout {
            display: flex;
            gap: 8px;
        }

        .btn-modo {
            flex: 1;
            padding: 10px;
            background: #fff;
            border: 2px solid #000;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 13px;
        }

        .btn-modo.ativo {
            background: #000;
            color: #fff;
        }

        .btn-modo:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <button class="controles-btn" id="btnControles">⚙️</button>

    <div class="painel-controles" id="painelControles">
        <div class="controle-grupo">
            <label class="controle-label">Modo de Layout</label>
            <div class="modo-layout">
                <button class="btn-modo ativo" data-modo="paisagem">Paisagem</button>
                <button class="btn-modo" data-modo="retrato">Retrato</button>
            </div>
        </div>

        <div class="controle-grupo">
            <label class="controle-label">Tamanho do Relógio</label>
            <div class="slider-container">
                <input type="range" class="slider" id="sliderTamanho" min="60" max="200" value="120">
                <span class="slider-valor" id="valorTamanho">120px</span>
            </div>
        </div>

        <div class="controle-grupo">
            <label class="controle-label">Seleção Rápida</label>
            <div class="botoes-rapidos">
                <button class="btn-rapido" data-offset="-1">Ontem</button>
                <button class="btn-rapido ativo" data-offset="0">Hoje</button>
                <button class="btn-rapido" data-offset="1">Amanhã</button>
            </div>
        </div>

        <div class="controle-grupo">
            <label class="controle-label">Escolher Data</label>
            <input type="date" class="input-data" id="inputData">
        </div>
    </div>

    <div class="container paisagem">
        <div class="secao-relogio">
            <div class="relogio" id="relogio">00:00</div>
            <div class="data-completa" id="dataCompleta">Carregando...</div>
            <div class="dia-semana" id="diaSemana">...</div>
        </div>

        <div class="secao-eventos">
            <h2 class="titulo-eventos" id="tituloEventos">Eventos de Hoje</h2>
            <div class="lista-eventos" id="listaEventos">
                <div class="sem-eventos">Carregando eventos...</div>
            </div>
        </div>
    </div>

    <script>
        // Dados de eventos
        const eventosData = {
            "2025-11-05": [
                        {
                                    "titulo": "⭐ Dia de Guarda",
                                    "inicio": "00:00",
                                    "fim": "23:59"
                        },
                        {
                                    "titulo": "Oração",
                                    "inicio": "16:30",
                                    "fim": "17:00"
                        },
                        {
                                    "titulo": "Probabilidade",
                                    "inicio": "17:00",
                                    "fim": "20:00"
                        },
                        {
                                    "titulo": "Jantar",
                                    "inicio": "20:00",
                                    "fim": "21:00"
                        },
                        {
                                    "titulo": "Exame",
                                    "inicio": "21:00",
                                    "fim": "21:15"
                        },
                        {
                                    "titulo": "Ir dormir",
                                    "inicio": "22:30",
                                    "fim": "22:30"
                        }
            ],
            "2025-11-06": [
                        {
                                    "titulo": "Tempo da Manhã",
                                    "inicio": "05:00",
                                    "fim": "08:00"
                        },
                        {
                                    "titulo": "Probabilidade",
                                    "inicio": "08:00",
                                    "fim": "11:00"
                        },
                        {
                                    "titulo": "Terço",
                                    "inicio": "10:00",
                                    "fim": "10:45"
                        },
                        {
                                    "titulo": "Almoço",
                                    "inicio": "12:40",
                                    "fim": "13:30"
                        },
                        {
                                    "titulo": "Leitura Espiritual",
                                    "inicio": "13:45",
                                    "fim": "14:00"
                        },
                        {
                                    "titulo": "Monitoria BV - Math 2",
                                    "inicio": "14:00",
                                    "fim": "16:00"
                        },
                        {
                                    "titulo": "Oração",
                                    "inicio": "16:30",
                                    "fim": "17:00"
                        },
                        {
                                    "titulo": "Probabilidade",
                                    "inicio": "17:00",
                                    "fim": "20:00"
                        },
                        {
                                    "titulo": "Jantar",
                                    "inicio": "20:00",
                                    "fim": "21:00"
                        },
                        {
                                    "titulo": "Exame",
                                    "inicio": "21:00",
                                    "fim": "21:15"
                        },
                        {
                                    "titulo": "Ir dormir",
                                    "inicio": "22:30",
                                    "fim": "22:30"
                        }
            ],
            "2025-11-07": [
                        {
                                    "titulo": "⭐ Dia de Turno",
                                    "inicio": "00:00",
                                    "fim": "23:59"
                        },
                        {
                                    "titulo": "Tempo da Manhã",
                                    "inicio": "05:00",
                                    "fim": "08:00"
                        },
                        {
                                    "titulo": "Leitura Espiritual",
                                    "inicio": "08:15",
                                    "fim": "08:30"
                        },
                        {
                                    "titulo": "Probabilidade",
                                    "inicio": "08:30",
                                    "fim": "12:15"
                        },
                        {
                                    "titulo": "Contemplação",
                                    "inicio": "12:30",
                                    "fim": "12:40"
                        },
                        {
                                    "titulo": "Almoço",
                                    "inicio": "12:40",
                                    "fim": "13:30"
                        },
                        {
                                    "titulo": "Terço ",
                                    "inicio": "13:30",
                                    "fim": "14:15"
                        },
                        {
                                    "titulo": "Probabilidade",
                                    "inicio": "14:15",
                                    "fim": "18:30"
                        },
                        {
                                    "titulo": "Meditação e Pizzada",
                                    "inicio": "19:30",
                                    "fim": "22:30"
                        }
            ],
            "2025-11-08": [
                        {
                                    "titulo": "Tempo da Manhã",
                                    "inicio": "06:00",
                                    "fim": "08:30"
                        },
                        {
                                    "titulo": "Leituras Espirituais",
                                    "inicio": "08:30",
                                    "fim": "08:45"
                        },
                        {
                                    "titulo": "Probabilidade",
                                    "inicio": "08:45",
                                    "fim": "12:30"
                        },
                        {
                                    "titulo": "Contemplação",
                                    "inicio": "12:45",
                                    "fim": "12:55"
                        },
                        {
                                    "titulo": "Almoço",
                                    "inicio": "13:00",
                                    "fim": "14:00"
                        },
                        {
                                    "titulo": "Probabilidade",
                                    "inicio": "14:00",
                                    "fim": "17:45"
                        },
                        {
                                    "titulo": "Oração",
                                    "inicio": "17:45",
                                    "fim": "18:15"
                        },
                        {
                                    "titulo": "Terço",
                                    "inicio": "19:15",
                                    "fim": "19:45"
                        },
                        {
                                    "titulo": "Jantar",
                                    "inicio": "19:45",
                                    "fim": "21:00"
                        },
                        {
                                    "titulo": "Exame",
                                    "inicio": "21:00",
                                    "fim": "21:15"
                        },
                        {
                                    "titulo": "Ir dormir",
                                    "inicio": "22:30",
                                    "fim": "22:30"
                        }
            ],
            "2025-11-09": [
                        {
                                    "titulo": "Tempo da Manhã",
                                    "inicio": "07:00",
                                    "fim": "09:15"
                        },
                        {
                                    "titulo": "Leitura Espiritual",
                                    "inicio": "09:15",
                                    "fim": "09:45"
                        },
                        {
                                    "titulo": "Contemplação",
                                    "inicio": "12:45",
                                    "fim": "12:55"
                        },
                        {
                                    "titulo": "Almoço",
                                    "inicio": "13:00",
                                    "fim": "14:00"
                        },
                        {
                                    "titulo": "Oração",
                                    "inicio": "17:00",
                                    "fim": "17:30"
                        },
                        {
                                    "titulo": "Circulo",
                                    "inicio": "19:15",
                                    "fim": "20:00"
                        },
                        {
                                    "titulo": "Jantar",
                                    "inicio": "20:00",
                                    "fim": "21:00"
                        },
                        {
                                    "titulo": "Exame",
                                    "inicio": "21:00",
                                    "fim": "21:15"
                        },
                        {
                                    "titulo": "Ir dormir",
                                    "inicio": "22:30",
                                    "fim": "22:30"
                        }
            ],
            "2025-11-10": [
                        {
                                    "titulo": "Tempo da Manhã",
                                    "inicio": "05:00",
                                    "fim": "08:00"
                        },
                        {
                                    "titulo": "Terço",
                                    "inicio": "08:15",
                                    "fim": "09:00"
                        },
                        {
                                    "titulo": "Monitoria BV - Macro",
                                    "inicio": "09:00",
                                    "fim": "10:00"
                        },
                        {
                                    "titulo": "Contemplação",
                                    "inicio": "10:15",
                                    "fim": "10:25"
                        },
                        {
                                    "titulo": "Almoço",
                                    "inicio": "12:40",
                                    "fim": "13:30"
                        },
                        {
                                    "titulo": "Leitura Espiritual",
                                    "inicio": "13:45",
                                    "fim": "14:00"
                        },
                        {
                                    "titulo": "Oração",
                                    "inicio": "16:30",
                                    "fim": "17:00"
                        },
                        {
                                    "titulo": "Conversa Barelli",
                                    "inicio": "19:15",
                                    "fim": "20:00"
                        },
                        {
                                    "titulo": "Cf Pasin",
                                    "inicio": "19:30",
                                    "fim": "20:00"
                        },
                        {
                                    "titulo": "Jantar",
                                    "inicio": "20:00",
                                    "fim": "21:00"
                        },
                        {
                                    "titulo": "Exame",
                                    "inicio": "21:00",
                                    "fim": "21:15"
                        },
                        {
                                    "titulo": "Ir dormir",
                                    "inicio": "22:30",
                                    "fim": "22:30"
                        }
            ],
            "2025-11-11": [
                        {
                                    "titulo": "⭐ Dia de Turno",
                                    "inicio": "00:00",
                                    "fim": "23:59"
                        },
                        {
                                    "titulo": "Tempo da Manhã",
                                    "inicio": "05:00",
                                    "fim": "08:00"
                        },
                        {
                                    "titulo": "Contemplação",
                                    "inicio": "12:30",
                                    "fim": "12:40"
                        },
                        {
                                    "titulo": "Almoço",
                                    "inicio": "12:40",
                                    "fim": "13:30"
                        },
                        {
                                    "titulo": "Terço ",
                                    "inicio": "13:30",
                                    "fim": "14:15"
                        },
                        {
                                    "titulo": "Oração",
                                    "inicio": "16:30",
                                    "fim": "17:00"
                        },
                        {
                                    "titulo": "Leitura Espiritual ",
                                    "inicio": "19:45",
                                    "fim": "20:00"
                        },
                        {
                                    "titulo": "Jantar",
                                    "inicio": "20:00",
                                    "fim": "21:00"
                        },
                        {
                                    "titulo": "Exame",
                                    "inicio": "21:00",
                                    "fim": "21:15"
                        },
                        {
                                    "titulo": "Ir dormir",
                                    "inicio": "22:30",
                                    "fim": "22:30"
                        }
            ],
            "2025-11-12": [
                        {
                                    "titulo": "⭐ Dia de Guarda",
                                    "inicio": "00:00",
                                    "fim": "23:59"
                        },
                        {
                                    "titulo": "Tempo da Manhã",
                                    "inicio": "05:00",
                                    "fim": "08:00"
                        },
                        {
                                    "titulo": "Terço ",
                                    "inicio": "08:00",
                                    "fim": "08:30"
                        },
                        {
                                    "titulo": "Tênis de Mesa",
                                    "inicio": "08:30",
                                    "fim": "10:00"
                        },
                        {
                                    "titulo": "Contemplação",
                                    "inicio": "10:15",
                                    "fim": "10:25"
                        },
                        {
                                    "titulo": "Almoço",
                                    "inicio": "12:40",
                                    "fim": "13:30"
                        },
                        {
                                    "titulo": "Leitura Espiritual",
                                    "inicio": "13:45",
                                    "fim": "14:00"
                        },
                        {
                                    "titulo": "Oração",
                                    "inicio": "16:30",
                                    "fim": "17:00"
                        }
            ]
};

        // Função para obter data atual no formato YYYY-MM-DD
        function obterDataFormatada(data) {
            const ano = data.getFullYear();
            const mes = String(data.getMonth() + 1).padStart(2, '0');
            const dia = String(data.getDate()).padStart(2, '0');
            return `${ano}-${mes}-${dia}`;
        }

        // Preencher com eventos de exemplo para hoje
        const hoje = new Date();
        const dataHoje = obterDataFormatada(hoje);

        eventosData[dataHoje] = [
            { titulo: "Reunião Matinal", inicio: "09:00", fim: "10:00" },
            { titulo: "Almoço", inicio: "12:00", fim: "13:00" },
            { titulo: "Projeto", inicio: "14:00", fim: "17:00" }
        ];

        // Adicionar eventos para ontem
        const ontem = new Date(hoje);
        ontem.setDate(ontem.getDate() - 1);
        const dataOntem = obterDataFormatada(ontem);
        eventosData[dataOntem] = [
            { titulo: "Café da Manhã", inicio: "08:00", fim: "08:30" },
            { titulo: "Reunião de Equipe", inicio: "10:00", fim: "11:30" }
        ];

        // Adicionar eventos para amanhã
        const amanha = new Date(hoje);
        amanha.setDate(amanha.getDate() + 1);
        const dataAmanha = obterDataFormatada(amanha);
        eventosData[dataAmanha] = [
            { titulo: "Planejamento", inicio: "09:00", fim: "10:30" },
            { titulo: "Workshop", inicio: "15:00", fim: "18:00" }
        ];

        // Estado global
        let dataSelecionada = new Date();
        let modoAtual = 'paisagem';

        // Converter horário para minutos
        function horarioParaMinutos(horario) {
            const [horas, minutos] = horario.split(':').map(Number);
            return horas * 60 + minutos;
        }

        // Obter estado do evento (passado, atual, futuro)
        function obterEstadoEvento(inicioStr, fimStr, dataEvento) {
            const agora = new Date();
            const dataAtual = obterDataFormatada(agora);
            const dataSel = obterDataFormatada(dataEvento);

            // Se não é hoje, comparar datas
            if (dataSel !== dataAtual) {
                return dataEvento < agora ? 'passado' : 'futuro';
            }

            // Se é hoje, comparar horários
            const horaAtual = agora.getHours() * 60 + agora.getMinutes();
            const inicio = horarioParaMinutos(inicioStr);
            const fim = horarioParaMinutos(fimStr);

            if (horaAtual < inicio) return 'futuro';
            if (horaAtual >= inicio && horaAtual < fim) return 'atual';
            return 'passado';
        }

        // Formatar data por extenso
        function formatarDataExtenso(data) {
            const meses = [
                'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
            ];
            const dia = data.getDate();
            const mes = meses[data.getMonth()];
            return `${dia} de ${mes}`;
        }

        // Formatar dia da semana
        function formatarDiaSemana(data) {
            const dias = [
                'Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira',
                'Quinta-feira', 'Sexta-feira', 'Sábado'
            ];
            return dias[data.getDay()];
        }

        // Atualizar relógio
        function atualizarRelogio() {
            const agora = new Date();
            const horas = String(agora.getHours()).padStart(2, '0');
            const minutos = String(agora.getMinutes()).padStart(2, '0');

            document.getElementById('relogio').textContent = `${horas}:${minutos}`;
        }

        // Atualizar data
        function atualizarData() {
            document.getElementById('dataCompleta').textContent = formatarDataExtenso(dataSelecionada);
            document.getElementById('diaSemana').textContent = formatarDiaSemana(dataSelecionada);
        }

        // Atualizar eventos
        function atualizarEventos() {
            const dataStr = obterDataFormatada(dataSelecionada);
            const eventos = eventosData[dataStr] || [];
            const listaEventos = document.getElementById('listaEventos');

            // Atualizar título
            const hoje = new Date();
            const ehHoje = obterDataFormatada(hoje) === dataStr;
            const ehOntem = obterDataFormatada(new Date(hoje.getTime() - 86400000)) === dataStr;
            const ehAmanha = obterDataFormatada(new Date(hoje.getTime() + 86400000)) === dataStr;

            let tituloTexto = 'Eventos de ';
            if (ehHoje) tituloTexto += 'Hoje';
            else if (ehOntem) tituloTexto += 'Ontem';
            else if (ehAmanha) tituloTexto += 'Amanhã';
            else tituloTexto += formatarDataExtenso(dataSelecionada);

            document.getElementById('tituloEventos').textContent = tituloTexto;

            // Renderizar eventos
            if (eventos.length === 0) {
                listaEventos.innerHTML = '<div class="sem-eventos">Nenhum evento para este dia</div>';
                return;
            }

            listaEventos.innerHTML = eventos.map(evento => {
                const estado = obterEstadoEvento(evento.inicio, evento.fim, dataSelecionada);
                return `
                    <div class="evento ${estado}">
                        <div class="evento-titulo">${evento.titulo}</div>
                        <div class="evento-horario">${evento.inicio} - ${evento.fim}</div>
                    </div>
                `;
            }).join('');
        }

        // Atualizar tudo
        function atualizarTudo() {
            atualizarRelogio();
            atualizarData();
            atualizarEventos();
        }

        // Controles - Toggle painel
        document.getElementById('btnControles').addEventListener('click', function() {
            document.getElementById('painelControles').classList.toggle('aberto');
        });

        // Fechar painel ao clicar fora
        document.addEventListener('click', function(e) {
            const painel = document.getElementById('painelControles');
            const btn = document.getElementById('btnControles');
            if (!painel.contains(e.target) && !btn.contains(e.target)) {
                painel.classList.remove('aberto');
            }
        });

        // Slider de tamanho
        const slider = document.getElementById('sliderTamanho');
        const valorTamanho = document.getElementById('valorTamanho');
        const relogio = document.getElementById('relogio');

        slider.addEventListener('input', function() {
            const tamanho = this.value;
            valorTamanho.textContent = tamanho + 'px';
            relogio.style.fontSize = tamanho + 'px';
            localStorage.setItem('tamanhoRelogio', tamanho);
        });

        // Carregar tamanho salvo
        const tamanhoSalvo = localStorage.getItem('tamanhoRelogio');
        if (tamanhoSalvo) {
            slider.value = tamanhoSalvo;
            valorTamanho.textContent = tamanhoSalvo + 'px';
            relogio.style.fontSize = tamanhoSalvo + 'px';
        }

        // Modo de layout
        document.querySelectorAll('.btn-modo').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.btn-modo').forEach(b => b.classList.remove('ativo'));
                this.classList.add('ativo');

                const modo = this.dataset.modo;
                const container = document.querySelector('.container');
                container.className = `container ${modo}`;

                localStorage.setItem('modoLayout', modo);
            });
        });

        // Carregar modo salvo
        const modoSalvo = localStorage.getItem('modoLayout');
        if (modoSalvo) {
            document.querySelector('.container').className = `container ${modoSalvo}`;
            document.querySelectorAll('.btn-modo').forEach(btn => {
                btn.classList.toggle('ativo', btn.dataset.modo === modoSalvo);
            });
        }

        // Botões de seleção rápida
        document.querySelectorAll('.btn-rapido').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.btn-rapido').forEach(b => b.classList.remove('ativo'));
                this.classList.add('ativo');

                const offset = parseInt(this.dataset.offset);
                const novaData = new Date();
                novaData.setDate(novaData.getDate() + offset);
                dataSelecionada = novaData;

                // Atualizar input de data
                document.getElementById('inputData').value = obterDataFormatada(dataSelecionada);

                atualizarTudo();
            });
        });

        // Input de data
        const inputData = document.getElementById('inputData');
        inputData.value = obterDataFormatada(dataSelecionada);

        inputData.addEventListener('change', function() {
            if (this.value) {
                const [ano, mes, dia] = this.value.split('-').map(Number);
                dataSelecionada = new Date(ano, mes - 1, dia);

                // Desativar botões rápidos
                document.querySelectorAll('.btn-rapido').forEach(b => b.classList.remove('ativo'));

                atualizarTudo();
            }
        });

        // Inicializar
        atualizarTudo();

        // Atualizar a cada minuto
        setInterval(atualizarTudo, 60000);
    </script>
</body>
</html>